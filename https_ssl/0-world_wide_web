#!/usr/bin/env bash
# This script retrieves A records of a domain's subdomains using dig

domain=$1
subdomain=$2

query_dns() {
    local sub=$1
    local result=$(dig +short "$sub.$domain")

    if [[ -n "$result" ]]; then
        echo "The subdomain $sub is a A record and points to $result"
    fi
}

if [[ -z "$subdomain" ]]; then
    for sub in www lb-01 web-01 web-02; do
        query_dns "$sub"
    done
else
    query_dns "$subdomain"
fi

echo ""  # Add a newline at the end for formatting
